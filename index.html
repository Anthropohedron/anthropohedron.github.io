<!DOCTYPE html>
<html><head>
<meta charset="UTF-8">
<title>Cards Dev</title>
<link rel="stylesheet" type="text/css" href="cards.css">
<link rel="stylesheet" type="text/css" href="smallcards.css">
<link rel="stylesheet" type="text/css" href="largecards.css">
<link rel="stylesheet" type="text/css" href="unicode.css">
<!--[if lt IE 7]>
<link rel="stylesheet" type="text/css" href="/pngHack/pngHack.css">
<![endif]-->
<script language="javascript" type="text/javascript"
	src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script language="javascript" type="text/javascript"
	src="combined.js"></script>
<script language="javascript" type="text/javascript"
	src="javascript/seahaven.js"></script>
<script language="javascript" type="text/javascript"
	src="javascript/klondike.js"></script>
<script language="javascript" type="text/javascript">

$(document).ready(function() {
  var game = null;
  var games = {};

  var rulesLink = $('#rulesLink');
  var gameSelect = $('#gameSelect');

  gameSelect.bind('change', function() {
    var option = gameSelect.val();
    var newGame = null;
    if (option == "none") return;
    if (games.hasOwnProperty(option)) {
      newGame = games[option];
    } else {
      newGame = eval('new '+option+'("#card_game_element", 10, 110);');
      games[option] = newGame;
    }
    if (game != newGame) {
      if (game) game.deactivate();
      game = newGame;
      game.activate();
      rulesLink.hash = option;
    }
    return true;
  });

  var dealing = document.getElementById("dealing");
  function dealFunc() {
    game.deal();
    dealing.style.visibility = "hidden";
  };

  $('#deal').bind('click', function() {
    if (game) {
      dealing.style.visibility = "visible";
      setTimeout(dealFunc, 100);
    }
  });

  function chooseSize(size) {
    size = (""+size).toUpperCase();
    switch(size) {
      case 'LARGE':
        document.body.classList.remove('SMALL');
        document.body.classList.add('LARGE');
        $('largecards').checked = true;
        break;
      case 'SMALL':
        document.body.classList.remove('LARGE');
        document.body.classList.add('SMALL');
        $('smallcards').checked = true;
        break;
    }
    if (game) game.reposition();
    var radio = $(size.toLowerCase()+'cards');
    if (radio) radio.checked = true;
    Cookies.set('size', size);
  };

  function chooseUnicode(unicode) {
    unicode = !!unicode;
    document.body.classList.toggle('UNICODE', unicode);
    $('unicode').checked = unicode;
    Cookies.set('unicode', ''+unicode);
  }

  $('#largecards').bind('click', function() { chooseSize('LARGE'); });
  $('#smallcards').bind('click', function() { chooseSize('SMALL'); });
  $('#unicode').bind('click', function() { chooseUnicode(this.checked); });
  $('#undo').bind('click', function() { if (game) game.undo(); });
  $('#redo').bind('click', function() { if (game) game.redo(); });

  chooseUnicode(Cookies.get('unicode') != 'false');
  chooseSize(Cookies.get('size') || 'LARGE');

});

</script>
</head><body bgcolor="#CCCCCC" class="LARGE UNICODE">

<form action="#" method="get">
<select id="gameSelect">
<option value="none" SELECTED>select a game
<option value="seahaven">Seahaven Towers
<!--
<option value="klondike">Klondike
-->
</select>
<input type="button" value="Deal" id="deal" />
<input type="button" value="Undo" id="undo" />
<input type="button" value="Redo" id="redo" />
<a href="http://www.allgoodsw.com/sol_rules.html"
  id="rulesLink" TARGET="rules">rules</a><br>
<label for="largecards"><input type="radio" name="cardSize" id="largecards"
value="LARGE" />large cards</label>
<label for="smallcards"><input type="radio" name="cardSize" id="smallcards"
value="SMALL" />small cards</label>
<label for="unicode"><input type="checkbox" name="unicodeFaces" id="unicode"
checked="checked" />Unicode cards</label>
</form>
<span id="dealing" style="color:red; visibility:hidden;">Dealing...</span>
<div id="card_game_element"></div>

</body></html>
